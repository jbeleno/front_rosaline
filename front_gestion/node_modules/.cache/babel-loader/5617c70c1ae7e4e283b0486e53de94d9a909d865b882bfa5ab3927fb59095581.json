{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jesus\\\\Desktop\\\\mantenimiento\\\\front_rosaline\\\\front_gestion\\\\src\\\\shared\\\\components\\\\Layout\\\\ProtectedRoute.jsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { Navigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../../../features/auth/hooks/useAuth';\n\n/**\r\n * Componente para proteger rutas que requieren autenticación\r\n * @param {Object} props\r\n * @param {React.ReactNode} props.children - Componente a renderizar si está autenticado\r\n * @param {boolean} props.requireAdmin - Si true, solo admins pueden acceder\r\n * @param {string} props.redirectTo - Ruta de redirección si no está autenticado\r\n */\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport function ProtectedRoute({\n  children,\n  requireAdmin = false,\n  redirectTo = '/login'\n}) {\n  _s();\n  const {\n    isAuthenticated,\n    isAdmin,\n    loading\n  } = useAuth();\n  const location = useLocation();\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        minHeight: '50vh'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Cargando...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 7\n    }, this);\n  }\n  if (!isAuthenticated) {\n    // Guardar la ubicación a la que intentaba acceder\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: redirectTo,\n      state: {\n        from: location\n      },\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 12\n    }, this);\n  }\n  if (requireAdmin && !isAdmin) {\n    // Usuario autenticado pero no es admin\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: children\n  }, void 0, false);\n}\n_s(ProtectedRoute, \"yEh7LKoC3G0LVVV9gFErT07ugdk=\", false, function () {\n  return [useAuth, useLocation];\n});\n_c = ProtectedRoute;\nvar _c;\n$RefreshReg$(_c, \"ProtectedRoute\");","map":{"version":3,"names":["React","Navigate","useLocation","useAuth","jsxDEV","_jsxDEV","Fragment","_Fragment","ProtectedRoute","children","requireAdmin","redirectTo","_s","isAuthenticated","isAdmin","loading","location","style","display","justifyContent","alignItems","minHeight","fileName","_jsxFileName","lineNumber","columnNumber","to","state","from","replace","_c","$RefreshReg$"],"sources":["C:/Users/jesus/Desktop/mantenimiento/front_rosaline/front_gestion/src/shared/components/Layout/ProtectedRoute.jsx"],"sourcesContent":["import React from 'react';\r\nimport { Navigate, useLocation } from 'react-router-dom';\r\nimport { useAuth } from '../../../features/auth/hooks/useAuth';\r\n\r\n/**\r\n * Componente para proteger rutas que requieren autenticación\r\n * @param {Object} props\r\n * @param {React.ReactNode} props.children - Componente a renderizar si está autenticado\r\n * @param {boolean} props.requireAdmin - Si true, solo admins pueden acceder\r\n * @param {string} props.redirectTo - Ruta de redirección si no está autenticado\r\n */\r\nexport function ProtectedRoute({ \r\n  children, \r\n  requireAdmin = false,\r\n  redirectTo = '/login' \r\n}) {\r\n  const { isAuthenticated, isAdmin, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{ \r\n        display: 'flex', \r\n        justifyContent: 'center', \r\n        alignItems: 'center', \r\n        minHeight: '50vh' \r\n      }}>\r\n        <div>Cargando...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!isAuthenticated) {\r\n    // Guardar la ubicación a la que intentaba acceder\r\n    return <Navigate to={redirectTo} state={{ from: location }} replace />;\r\n  }\r\n\r\n  if (requireAdmin && !isAdmin) {\r\n    // Usuario autenticado pero no es admin\r\n    return <Navigate to=\"/\" replace />;\r\n  }\r\n\r\n  return <>{children}</>;\r\n}\r\n\r\n"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,EAAEC,WAAW,QAAQ,kBAAkB;AACxD,SAASC,OAAO,QAAQ,sCAAsC;;AAE9D;AACA;AACA;AACA;AACA;AACA;AACA;AANA,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAOA,OAAO,SAASC,cAAcA,CAAC;EAC7BC,QAAQ;EACRC,YAAY,GAAG,KAAK;EACpBC,UAAU,GAAG;AACf,CAAC,EAAE;EAAAC,EAAA;EACD,MAAM;IAAEC,eAAe;IAAEC,OAAO;IAAEC;EAAQ,CAAC,GAAGZ,OAAO,CAAC,CAAC;EACvD,MAAMa,QAAQ,GAAGd,WAAW,CAAC,CAAC;EAE9B,IAAIa,OAAO,EAAE;IACX,oBACEV,OAAA;MAAKY,KAAK,EAAE;QACVC,OAAO,EAAE,MAAM;QACfC,cAAc,EAAE,QAAQ;QACxBC,UAAU,EAAE,QAAQ;QACpBC,SAAS,EAAE;MACb,CAAE;MAAAZ,QAAA,eACAJ,OAAA;QAAAI,QAAA,EAAK;MAAW;QAAAa,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACnB,CAAC;EAEV;EAEA,IAAI,CAACZ,eAAe,EAAE;IACpB;IACA,oBAAOR,OAAA,CAACJ,QAAQ;MAACyB,EAAE,EAAEf,UAAW;MAACgB,KAAK,EAAE;QAAEC,IAAI,EAAEZ;MAAS,CAAE;MAACa,OAAO;IAAA;MAAAP,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACxE;EAEA,IAAIf,YAAY,IAAI,CAACI,OAAO,EAAE;IAC5B;IACA,oBAAOT,OAAA,CAACJ,QAAQ;MAACyB,EAAE,EAAC,GAAG;MAACG,OAAO;IAAA;MAAAP,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACpC;EAEA,oBAAOpB,OAAA,CAAAE,SAAA;IAAAE,QAAA,EAAGA;EAAQ,gBAAG,CAAC;AACxB;AAACG,EAAA,CAhCeJ,cAAc;EAAA,QAKkBL,OAAO,EACpCD,WAAW;AAAA;AAAA4B,EAAA,GANdtB,cAAc;AAAA,IAAAsB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
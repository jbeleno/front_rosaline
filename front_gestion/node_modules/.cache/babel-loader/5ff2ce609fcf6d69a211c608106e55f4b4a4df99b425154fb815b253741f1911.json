{"ast":null,"code":"var _s = $RefreshSig$();\n/**\r\n * Hook personalizado para obtener un producto específico\r\n */\nimport { useState, useEffect } from 'react';\nimport { apiClient } from '../../../shared/services/api/apiClient';\nimport { API_ENDPOINTS } from '../../../shared/services/api/endpoints';\nimport { normalizeImageUrl } from '../../../shared/utils/helpers';\nexport function useProduct(productId) {\n  _s();\n  const [product, setProduct] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    if (!productId) {\n      setLoading(false);\n      return;\n    }\n    let cancelled = false;\n    const fetchProduct = async () => {\n      setLoading(true);\n      setError(null);\n      try {\n        const productos = await apiClient.get(API_ENDPOINTS.PRODUCTOS);\n        const productData = productos.find(p => p.id_producto === parseInt(productId));\n        if (!productData) {\n          throw new Error('Producto no encontrado');\n        }\n\n        // Normalizar URL de imagen\n        if (productData.imagen_url) {\n          productData.imagen_url = normalizeImageUrl(productData.imagen_url);\n        }\n        if (!cancelled) {\n          setProduct(productData);\n          setLoading(false);\n        }\n      } catch (err) {\n        if (!cancelled) {\n          setError(err.message || 'Error al cargar el producto');\n          setLoading(false);\n        }\n      }\n    };\n    fetchProduct();\n    return () => {\n      cancelled = true;\n    };\n  }, [productId]);\n  const refetch = async () => {\n    setLoading(true);\n    try {\n      const productos = await apiClient.get(API_ENDPOINTS.PRODUCTOS);\n      const productData = productos.find(p => p.id_producto === parseInt(productId));\n      if (productData !== null && productData !== void 0 && productData.imagen_url) {\n        productData.imagen_url = normalizeImageUrl(productData.imagen_url);\n      }\n      setProduct(productData);\n      setLoading(false);\n    } catch (err) {\n      setError(err.message);\n      setLoading(false);\n    }\n  };\n  return {\n    product,\n    loading,\n    error,\n    refetch\n  };\n}\n_s(useProduct, \"OykZgolRXF5NMKIrRjnuAyPsifE=\");","map":{"version":3,"names":["useState","useEffect","apiClient","API_ENDPOINTS","normalizeImageUrl","useProduct","productId","_s","product","setProduct","loading","setLoading","error","setError","cancelled","fetchProduct","productos","get","PRODUCTOS","productData","find","p","id_producto","parseInt","Error","imagen_url","err","message","refetch"],"sources":["C:/Users/jesus/Desktop/mantenimiento/front_rosaline/front_gestion/src/features/products/hooks/useProduct.js"],"sourcesContent":["/**\r\n * Hook personalizado para obtener un producto específico\r\n */\r\nimport { useState, useEffect } from 'react';\r\nimport { apiClient } from '../../../shared/services/api/apiClient';\r\nimport { API_ENDPOINTS } from '../../../shared/services/api/endpoints';\r\nimport { normalizeImageUrl } from '../../../shared/utils/helpers';\r\n\r\nexport function useProduct(productId) {\r\n  const [product, setProduct] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (!productId) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    let cancelled = false;\r\n\r\n    const fetchProduct = async () => {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      try {\r\n        const productos = await apiClient.get(API_ENDPOINTS.PRODUCTOS);\r\n        const productData = productos.find(p => p.id_producto === parseInt(productId));\r\n\r\n        if (!productData) {\r\n          throw new Error('Producto no encontrado');\r\n        }\r\n\r\n        // Normalizar URL de imagen\r\n        if (productData.imagen_url) {\r\n          productData.imagen_url = normalizeImageUrl(productData.imagen_url);\r\n        }\r\n\r\n        if (!cancelled) {\r\n          setProduct(productData);\r\n          setLoading(false);\r\n        }\r\n      } catch (err) {\r\n        if (!cancelled) {\r\n          setError(err.message || 'Error al cargar el producto');\r\n          setLoading(false);\r\n        }\r\n      }\r\n    };\r\n\r\n    fetchProduct();\r\n\r\n    return () => {\r\n      cancelled = true;\r\n    };\r\n  }, [productId]);\r\n\r\n  const refetch = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const productos = await apiClient.get(API_ENDPOINTS.PRODUCTOS);\r\n      const productData = productos.find(p => p.id_producto === parseInt(productId));\r\n      \r\n      if (productData?.imagen_url) {\r\n        productData.imagen_url = normalizeImageUrl(productData.imagen_url);\r\n      }\r\n      \r\n      setProduct(productData);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      setError(err.message);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return { product, loading, error, refetch };\r\n}\r\n\r\n"],"mappings":";AAAA;AACA;AACA;AACA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,SAAS,QAAQ,wCAAwC;AAClE,SAASC,aAAa,QAAQ,wCAAwC;AACtE,SAASC,iBAAiB,QAAQ,+BAA+B;AAEjE,OAAO,SAASC,UAAUA,CAACC,SAAS,EAAE;EAAAC,EAAA;EACpC,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGT,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACU,OAAO,EAAEC,UAAU,CAAC,GAAGX,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACY,KAAK,EAAEC,QAAQ,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;EAExCC,SAAS,CAAC,MAAM;IACd,IAAI,CAACK,SAAS,EAAE;MACdK,UAAU,CAAC,KAAK,CAAC;MACjB;IACF;IAEA,IAAIG,SAAS,GAAG,KAAK;IAErB,MAAMC,YAAY,GAAG,MAAAA,CAAA,KAAY;MAC/BJ,UAAU,CAAC,IAAI,CAAC;MAChBE,QAAQ,CAAC,IAAI,CAAC;MAEd,IAAI;QACF,MAAMG,SAAS,GAAG,MAAMd,SAAS,CAACe,GAAG,CAACd,aAAa,CAACe,SAAS,CAAC;QAC9D,MAAMC,WAAW,GAAGH,SAAS,CAACI,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,WAAW,KAAKC,QAAQ,CAACjB,SAAS,CAAC,CAAC;QAE9E,IAAI,CAACa,WAAW,EAAE;UAChB,MAAM,IAAIK,KAAK,CAAC,wBAAwB,CAAC;QAC3C;;QAEA;QACA,IAAIL,WAAW,CAACM,UAAU,EAAE;UAC1BN,WAAW,CAACM,UAAU,GAAGrB,iBAAiB,CAACe,WAAW,CAACM,UAAU,CAAC;QACpE;QAEA,IAAI,CAACX,SAAS,EAAE;UACdL,UAAU,CAACU,WAAW,CAAC;UACvBR,UAAU,CAAC,KAAK,CAAC;QACnB;MACF,CAAC,CAAC,OAAOe,GAAG,EAAE;QACZ,IAAI,CAACZ,SAAS,EAAE;UACdD,QAAQ,CAACa,GAAG,CAACC,OAAO,IAAI,6BAA6B,CAAC;UACtDhB,UAAU,CAAC,KAAK,CAAC;QACnB;MACF;IACF,CAAC;IAEDI,YAAY,CAAC,CAAC;IAEd,OAAO,MAAM;MACXD,SAAS,GAAG,IAAI;IAClB,CAAC;EACH,CAAC,EAAE,CAACR,SAAS,CAAC,CAAC;EAEf,MAAMsB,OAAO,GAAG,MAAAA,CAAA,KAAY;IAC1BjB,UAAU,CAAC,IAAI,CAAC;IAChB,IAAI;MACF,MAAMK,SAAS,GAAG,MAAMd,SAAS,CAACe,GAAG,CAACd,aAAa,CAACe,SAAS,CAAC;MAC9D,MAAMC,WAAW,GAAGH,SAAS,CAACI,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,WAAW,KAAKC,QAAQ,CAACjB,SAAS,CAAC,CAAC;MAE9E,IAAIa,WAAW,aAAXA,WAAW,eAAXA,WAAW,CAAEM,UAAU,EAAE;QAC3BN,WAAW,CAACM,UAAU,GAAGrB,iBAAiB,CAACe,WAAW,CAACM,UAAU,CAAC;MACpE;MAEAhB,UAAU,CAACU,WAAW,CAAC;MACvBR,UAAU,CAAC,KAAK,CAAC;IACnB,CAAC,CAAC,OAAOe,GAAG,EAAE;MACZb,QAAQ,CAACa,GAAG,CAACC,OAAO,CAAC;MACrBhB,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,OAAO;IAAEH,OAAO;IAAEE,OAAO;IAAEE,KAAK;IAAEgB;EAAQ,CAAC;AAC7C;AAACrB,EAAA,CApEeF,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
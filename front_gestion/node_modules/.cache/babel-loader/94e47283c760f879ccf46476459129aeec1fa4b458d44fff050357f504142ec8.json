{"ast":null,"code":"var _s = $RefreshSig$();\n/**\r\n * Hook personalizado para obtener productos\r\n * Usa React Query para caché y gestión de estado\r\n */\nimport { useState, useEffect } from 'react';\nimport { apiClient } from '../../../shared/services/api/apiClient';\nimport { API_ENDPOINTS } from '../../../shared/services/api/endpoints';\nexport function useProducts(filters = {}) {\n  _s();\n  const [productos, setProductos] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    let cancelled = false;\n    const fetchProducts = async () => {\n      setLoading(true);\n      setError(null);\n      try {\n        const data = await apiClient.get(API_ENDPOINTS.PRODUCTOS);\n        if (!cancelled) {\n          // Aplicar filtros locales si es necesario\n          let filteredData = data;\n          if (filters.categoria) {\n            filteredData = filteredData.filter(p => p.id_categoria === parseInt(filters.categoria));\n          }\n          if (filters.search) {\n            const searchLower = filters.search.toLowerCase();\n            filteredData = filteredData.filter(p => {\n              var _p$descripcion;\n              return p.nombre.toLowerCase().includes(searchLower) || ((_p$descripcion = p.descripcion) === null || _p$descripcion === void 0 ? void 0 : _p$descripcion.toLowerCase().includes(searchLower));\n            });\n          }\n          setProductos(filteredData);\n          setLoading(false);\n        }\n      } catch (err) {\n        if (!cancelled) {\n          setError(err.message || 'Error al cargar productos');\n          setLoading(false);\n        }\n      }\n    };\n    fetchProducts();\n    return () => {\n      cancelled = true;\n    };\n  }, [JSON.stringify(filters)]);\n  const refetch = async () => {\n    setLoading(true);\n    try {\n      const data = await apiClient.get(API_ENDPOINTS.PRODUCTOS);\n      setProductos(data);\n      setLoading(false);\n    } catch (err) {\n      setError(err.message);\n      setLoading(false);\n    }\n  };\n  return {\n    productos,\n    loading,\n    error,\n    refetch\n  };\n}\n_s(useProducts, \"lOr/iwIl6dANEm1H7/qrEIuPMFM=\");","map":{"version":3,"names":["useState","useEffect","apiClient","API_ENDPOINTS","useProducts","filters","_s","productos","setProductos","loading","setLoading","error","setError","cancelled","fetchProducts","data","get","PRODUCTOS","filteredData","categoria","filter","p","id_categoria","parseInt","search","searchLower","toLowerCase","_p$descripcion","nombre","includes","descripcion","err","message","JSON","stringify","refetch"],"sources":["C:/Users/jesus/Desktop/mantenimiento/front_rosaline/front_gestion/src/features/products/hooks/useProducts.js"],"sourcesContent":["/**\r\n * Hook personalizado para obtener productos\r\n * Usa React Query para caché y gestión de estado\r\n */\r\nimport { useState, useEffect } from 'react';\r\nimport { apiClient } from '../../../shared/services/api/apiClient';\r\nimport { API_ENDPOINTS } from '../../../shared/services/api/endpoints';\r\n\r\nexport function useProducts(filters = {}) {\r\n  const [productos, setProductos] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    let cancelled = false;\r\n\r\n    const fetchProducts = async () => {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      try {\r\n        const data = await apiClient.get(API_ENDPOINTS.PRODUCTOS);\r\n        \r\n        if (!cancelled) {\r\n          // Aplicar filtros locales si es necesario\r\n          let filteredData = data;\r\n          \r\n          if (filters.categoria) {\r\n            filteredData = filteredData.filter(p => \r\n              p.id_categoria === parseInt(filters.categoria)\r\n            );\r\n          }\r\n\r\n          if (filters.search) {\r\n            const searchLower = filters.search.toLowerCase();\r\n            filteredData = filteredData.filter(p =>\r\n              p.nombre.toLowerCase().includes(searchLower) ||\r\n              p.descripcion?.toLowerCase().includes(searchLower)\r\n            );\r\n          }\r\n\r\n          setProductos(filteredData);\r\n          setLoading(false);\r\n        }\r\n      } catch (err) {\r\n        if (!cancelled) {\r\n          setError(err.message || 'Error al cargar productos');\r\n          setLoading(false);\r\n        }\r\n      }\r\n    };\r\n\r\n    fetchProducts();\r\n\r\n    return () => {\r\n      cancelled = true;\r\n    };\r\n  }, [JSON.stringify(filters)]);\r\n\r\n  const refetch = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const data = await apiClient.get(API_ENDPOINTS.PRODUCTOS);\r\n      setProductos(data);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      setError(err.message);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return { productos, loading, error, refetch };\r\n}\r\n\r\n"],"mappings":";AAAA;AACA;AACA;AACA;AACA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,SAAS,QAAQ,wCAAwC;AAClE,SAASC,aAAa,QAAQ,wCAAwC;AAEtE,OAAO,SAASC,WAAWA,CAACC,OAAO,GAAG,CAAC,CAAC,EAAE;EAAAC,EAAA;EACxC,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGR,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACS,OAAO,EAAEC,UAAU,CAAC,GAAGV,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACW,KAAK,EAAEC,QAAQ,CAAC,GAAGZ,QAAQ,CAAC,IAAI,CAAC;EAExCC,SAAS,CAAC,MAAM;IACd,IAAIY,SAAS,GAAG,KAAK;IAErB,MAAMC,aAAa,GAAG,MAAAA,CAAA,KAAY;MAChCJ,UAAU,CAAC,IAAI,CAAC;MAChBE,QAAQ,CAAC,IAAI,CAAC;MAEd,IAAI;QACF,MAAMG,IAAI,GAAG,MAAMb,SAAS,CAACc,GAAG,CAACb,aAAa,CAACc,SAAS,CAAC;QAEzD,IAAI,CAACJ,SAAS,EAAE;UACd;UACA,IAAIK,YAAY,GAAGH,IAAI;UAEvB,IAAIV,OAAO,CAACc,SAAS,EAAE;YACrBD,YAAY,GAAGA,YAAY,CAACE,MAAM,CAACC,CAAC,IAClCA,CAAC,CAACC,YAAY,KAAKC,QAAQ,CAAClB,OAAO,CAACc,SAAS,CAC/C,CAAC;UACH;UAEA,IAAId,OAAO,CAACmB,MAAM,EAAE;YAClB,MAAMC,WAAW,GAAGpB,OAAO,CAACmB,MAAM,CAACE,WAAW,CAAC,CAAC;YAChDR,YAAY,GAAGA,YAAY,CAACE,MAAM,CAACC,CAAC;cAAA,IAAAM,cAAA;cAAA,OAClCN,CAAC,CAACO,MAAM,CAACF,WAAW,CAAC,CAAC,CAACG,QAAQ,CAACJ,WAAW,CAAC,MAAAE,cAAA,GAC5CN,CAAC,CAACS,WAAW,cAAAH,cAAA,uBAAbA,cAAA,CAAeD,WAAW,CAAC,CAAC,CAACG,QAAQ,CAACJ,WAAW,CAAC;YAAA,CACpD,CAAC;UACH;UAEAjB,YAAY,CAACU,YAAY,CAAC;UAC1BR,UAAU,CAAC,KAAK,CAAC;QACnB;MACF,CAAC,CAAC,OAAOqB,GAAG,EAAE;QACZ,IAAI,CAAClB,SAAS,EAAE;UACdD,QAAQ,CAACmB,GAAG,CAACC,OAAO,IAAI,2BAA2B,CAAC;UACpDtB,UAAU,CAAC,KAAK,CAAC;QACnB;MACF;IACF,CAAC;IAEDI,aAAa,CAAC,CAAC;IAEf,OAAO,MAAM;MACXD,SAAS,GAAG,IAAI;IAClB,CAAC;EACH,CAAC,EAAE,CAACoB,IAAI,CAACC,SAAS,CAAC7B,OAAO,CAAC,CAAC,CAAC;EAE7B,MAAM8B,OAAO,GAAG,MAAAA,CAAA,KAAY;IAC1BzB,UAAU,CAAC,IAAI,CAAC;IAChB,IAAI;MACF,MAAMK,IAAI,GAAG,MAAMb,SAAS,CAACc,GAAG,CAACb,aAAa,CAACc,SAAS,CAAC;MACzDT,YAAY,CAACO,IAAI,CAAC;MAClBL,UAAU,CAAC,KAAK,CAAC;IACnB,CAAC,CAAC,OAAOqB,GAAG,EAAE;MACZnB,QAAQ,CAACmB,GAAG,CAACC,OAAO,CAAC;MACrBtB,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,OAAO;IAAEH,SAAS;IAAEE,OAAO;IAAEE,KAAK;IAAEwB;EAAQ,CAAC;AAC/C;AAAC7B,EAAA,CAhEeF,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"/**\r\n * Cliente API centralizado para todas las peticiones HTTP\r\n * Maneja errores, headers y configuración común\r\n */\n\nconst API_BASE_URL = 'https://back-rosaline.onrender.com';\nclass ApiClient {\n  constructor(baseURL = API_BASE_URL) {\n    this.baseURL = baseURL;\n  }\n\n  /**\r\n   * Obtener headers comunes para las peticiones\r\n   */\n  getHeaders() {\n    const headers = {\n      'Content-Type': 'application/json'\n    };\n\n    // Agregar token de autenticación si existe\n    const token = localStorage.getItem('token');\n    if (token) {\n      headers['Authorization'] = `Bearer ${token}`;\n    }\n    return headers;\n  }\n\n  /**\r\n   * Manejar respuesta de la API\r\n   */\n  async handleResponse(response) {\n    console.log(`[API Client] Response status: ${response.status}`, response.url);\n    if (!response.ok) {\n      let errorMessage = 'Error en la petición';\n      try {\n        const errorData = await response.json();\n        errorMessage = errorData.message || errorData.error || errorMessage;\n      } catch {\n        const text = await response.text();\n        errorMessage = `Error ${response.status}: ${response.statusText}. ${text}`;\n      }\n      console.error(`[API Client] Error:`, errorMessage);\n      throw new Error(errorMessage);\n    }\n\n    // Verificar content-type\n    const contentType = response.headers.get('content-type') || '';\n\n    // Si la respuesta está vacía, retornar null\n    if (!contentType.includes('application/json')) {\n      const text = await response.text();\n      console.warn(`[API Client] Response is not JSON, content-type: ${contentType}`);\n\n      // Si hay texto, intentar parsearlo como JSON\n      if (text.trim()) {\n        try {\n          return JSON.parse(text);\n        } catch {\n          return null;\n        }\n      }\n      return null;\n    }\n    try {\n      const data = await response.json();\n      console.log(`[API Client] Success:`, (data === null || data === void 0 ? void 0 : data.length) || 'Data received');\n      return data;\n    } catch (error) {\n      console.error(`[API Client] Error parsing JSON:`, error);\n      throw new Error('Error al parsear la respuesta del servidor');\n    }\n  }\n\n  /**\r\n   * Realizar petición GET\r\n   */\n  async get(endpoint) {\n    try {\n      const response = await fetch(`${this.baseURL}${endpoint}`, {\n        method: 'GET',\n        headers: this.getHeaders()\n      });\n      return await this.handleResponse(response);\n    } catch (error) {\n      console.error(`Error en GET ${endpoint}:`, error);\n      throw error;\n    }\n  }\n\n  /**\r\n   * Realizar petición POST\r\n   */\n  async post(endpoint, data = {}) {\n    try {\n      const response = await fetch(`${this.baseURL}${endpoint}`, {\n        method: 'POST',\n        headers: this.getHeaders(),\n        body: JSON.stringify(data)\n      });\n      return await this.handleResponse(response);\n    } catch (error) {\n      console.error(`Error en POST ${endpoint}:`, error);\n      throw error;\n    }\n  }\n\n  /**\r\n   * Realizar petición PUT\r\n   */\n  async put(endpoint, data = {}) {\n    try {\n      const response = await fetch(`${this.baseURL}${endpoint}`, {\n        method: 'PUT',\n        headers: this.getHeaders(),\n        body: JSON.stringify(data)\n      });\n      return await this.handleResponse(response);\n    } catch (error) {\n      console.error(`Error en PUT ${endpoint}:`, error);\n      throw error;\n    }\n  }\n\n  /**\r\n   * Realizar petición DELETE\r\n   */\n  async delete(endpoint) {\n    try {\n      const response = await fetch(`${this.baseURL}${endpoint}`, {\n        method: 'DELETE',\n        headers: this.getHeaders()\n      });\n      return await this.handleResponse(response);\n    } catch (error) {\n      console.error(`Error en DELETE ${endpoint}:`, error);\n      throw error;\n    }\n  }\n}\n\n// Instancia singleton\nexport const apiClient = new ApiClient();\nexport default apiClient;","map":{"version":3,"names":["API_BASE_URL","ApiClient","constructor","baseURL","getHeaders","headers","token","localStorage","getItem","handleResponse","response","console","log","status","url","ok","errorMessage","errorData","json","message","error","text","statusText","Error","contentType","get","includes","warn","trim","JSON","parse","data","length","endpoint","fetch","method","post","body","stringify","put","delete","apiClient"],"sources":["C:/Users/jesus/Desktop/mantenimiento/front_rosaline/front_gestion/src/shared/services/api/apiClient.js"],"sourcesContent":["/**\r\n * Cliente API centralizado para todas las peticiones HTTP\r\n * Maneja errores, headers y configuración común\r\n */\r\n\r\nconst API_BASE_URL = 'https://back-rosaline.onrender.com';\r\n\r\nclass ApiClient {\r\n  constructor(baseURL = API_BASE_URL) {\r\n    this.baseURL = baseURL;\r\n  }\r\n\r\n  /**\r\n   * Obtener headers comunes para las peticiones\r\n   */\r\n  getHeaders() {\r\n    const headers = {\r\n      'Content-Type': 'application/json',\r\n    };\r\n\r\n    // Agregar token de autenticación si existe\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      headers['Authorization'] = `Bearer ${token}`;\r\n    }\r\n\r\n    return headers;\r\n  }\r\n\r\n  /**\r\n   * Manejar respuesta de la API\r\n   */\r\n  async handleResponse(response) {\r\n    console.log(`[API Client] Response status: ${response.status}`, response.url);\r\n    \r\n    if (!response.ok) {\r\n      let errorMessage = 'Error en la petición';\r\n      \r\n      try {\r\n        const errorData = await response.json();\r\n        errorMessage = errorData.message || errorData.error || errorMessage;\r\n      } catch {\r\n        const text = await response.text();\r\n        errorMessage = `Error ${response.status}: ${response.statusText}. ${text}`;\r\n      }\r\n\r\n      console.error(`[API Client] Error:`, errorMessage);\r\n      throw new Error(errorMessage);\r\n    }\r\n\r\n    // Verificar content-type\r\n    const contentType = response.headers.get('content-type') || '';\r\n    \r\n    // Si la respuesta está vacía, retornar null\r\n    if (!contentType.includes('application/json')) {\r\n      const text = await response.text();\r\n      console.warn(`[API Client] Response is not JSON, content-type: ${contentType}`);\r\n      \r\n      // Si hay texto, intentar parsearlo como JSON\r\n      if (text.trim()) {\r\n        try {\r\n          return JSON.parse(text);\r\n        } catch {\r\n          return null;\r\n        }\r\n      }\r\n      return null;\r\n    }\r\n\r\n    try {\r\n      const data = await response.json();\r\n      console.log(`[API Client] Success:`, data?.length || 'Data received');\r\n      return data;\r\n    } catch (error) {\r\n      console.error(`[API Client] Error parsing JSON:`, error);\r\n      throw new Error('Error al parsear la respuesta del servidor');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Realizar petición GET\r\n   */\r\n  async get(endpoint) {\r\n    try {\r\n      const response = await fetch(`${this.baseURL}${endpoint}`, {\r\n        method: 'GET',\r\n        headers: this.getHeaders(),\r\n      });\r\n\r\n      return await this.handleResponse(response);\r\n    } catch (error) {\r\n      console.error(`Error en GET ${endpoint}:`, error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Realizar petición POST\r\n   */\r\n  async post(endpoint, data = {}) {\r\n    try {\r\n      const response = await fetch(`${this.baseURL}${endpoint}`, {\r\n        method: 'POST',\r\n        headers: this.getHeaders(),\r\n        body: JSON.stringify(data),\r\n      });\r\n\r\n      return await this.handleResponse(response);\r\n    } catch (error) {\r\n      console.error(`Error en POST ${endpoint}:`, error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Realizar petición PUT\r\n   */\r\n  async put(endpoint, data = {}) {\r\n    try {\r\n      const response = await fetch(`${this.baseURL}${endpoint}`, {\r\n        method: 'PUT',\r\n        headers: this.getHeaders(),\r\n        body: JSON.stringify(data),\r\n      });\r\n\r\n      return await this.handleResponse(response);\r\n    } catch (error) {\r\n      console.error(`Error en PUT ${endpoint}:`, error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Realizar petición DELETE\r\n   */\r\n  async delete(endpoint) {\r\n    try {\r\n      const response = await fetch(`${this.baseURL}${endpoint}`, {\r\n        method: 'DELETE',\r\n        headers: this.getHeaders(),\r\n      });\r\n\r\n      return await this.handleResponse(response);\r\n    } catch (error) {\r\n      console.error(`Error en DELETE ${endpoint}:`, error);\r\n      throw error;\r\n    }\r\n  }\r\n}\r\n\r\n// Instancia singleton\r\nexport const apiClient = new ApiClient();\r\nexport default apiClient;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"/**\r\n * Cliente API centralizado para todas las peticiones HTTP\r\n * Maneja errores, headers y configuración común\r\n */\n\nconst API_BASE_URL = 'https://back-rosaline.onrender.com';\nclass ApiClient {\n  constructor(baseURL = API_BASE_URL) {\n    this.baseURL = baseURL;\n  }\n\n  /**\r\n   * Obtener headers comunes para las peticiones\r\n   */\n  getHeaders() {\n    const headers = {\n      'Content-Type': 'application/json'\n    };\n\n    // Agregar token de autenticación si existe\n    const token = localStorage.getItem('token');\n    if (token) {\n      headers['Authorization'] = `Bearer ${token}`;\n    }\n    return headers;\n  }\n\n  /**\r\n   * Manejar respuesta de la API\r\n   */\n  async handleResponse(response) {\n    if (!response.ok) {\n      let errorMessage = 'Error en la petición';\n      try {\n        const errorData = await response.json();\n        errorMessage = errorData.message || errorData.error || errorMessage;\n      } catch {\n        errorMessage = `Error ${response.status}: ${response.statusText}`;\n      }\n      throw new Error(errorMessage);\n    }\n\n    // Si la respuesta está vacía, retornar null\n    const contentType = response.headers.get('content-type');\n    if (!contentType || !contentType.includes('application/json')) {\n      return null;\n    }\n    return response.json();\n  }\n\n  /**\r\n   * Realizar petición GET\r\n   */\n  async get(endpoint) {\n    try {\n      const response = await fetch(`${this.baseURL}${endpoint}`, {\n        method: 'GET',\n        headers: this.getHeaders()\n      });\n      return await this.handleResponse(response);\n    } catch (error) {\n      console.error(`Error en GET ${endpoint}:`, error);\n      throw error;\n    }\n  }\n\n  /**\r\n   * Realizar petición POST\r\n   */\n  async post(endpoint, data = {}) {\n    try {\n      const response = await fetch(`${this.baseURL}${endpoint}`, {\n        method: 'POST',\n        headers: this.getHeaders(),\n        body: JSON.stringify(data)\n      });\n      return await this.handleResponse(response);\n    } catch (error) {\n      console.error(`Error en POST ${endpoint}:`, error);\n      throw error;\n    }\n  }\n\n  /**\r\n   * Realizar petición PUT\r\n   */\n  async put(endpoint, data = {}) {\n    try {\n      const response = await fetch(`${this.baseURL}${endpoint}`, {\n        method: 'PUT',\n        headers: this.getHeaders(),\n        body: JSON.stringify(data)\n      });\n      return await this.handleResponse(response);\n    } catch (error) {\n      console.error(`Error en PUT ${endpoint}:`, error);\n      throw error;\n    }\n  }\n\n  /**\r\n   * Realizar petición DELETE\r\n   */\n  async delete(endpoint) {\n    try {\n      const response = await fetch(`${this.baseURL}${endpoint}`, {\n        method: 'DELETE',\n        headers: this.getHeaders()\n      });\n      return await this.handleResponse(response);\n    } catch (error) {\n      console.error(`Error en DELETE ${endpoint}:`, error);\n      throw error;\n    }\n  }\n}\n\n// Instancia singleton\nexport const apiClient = new ApiClient();\nexport default apiClient;","map":{"version":3,"names":["API_BASE_URL","ApiClient","constructor","baseURL","getHeaders","headers","token","localStorage","getItem","handleResponse","response","ok","errorMessage","errorData","json","message","error","status","statusText","Error","contentType","get","includes","endpoint","fetch","method","console","post","data","body","JSON","stringify","put","delete","apiClient"],"sources":["C:/Users/jesus/Desktop/mantenimiento/front_rosaline/front_gestion/src/shared/services/api/apiClient.js"],"sourcesContent":["/**\r\n * Cliente API centralizado para todas las peticiones HTTP\r\n * Maneja errores, headers y configuración común\r\n */\r\n\r\nconst API_BASE_URL = 'https://back-rosaline.onrender.com';\r\n\r\nclass ApiClient {\r\n  constructor(baseURL = API_BASE_URL) {\r\n    this.baseURL = baseURL;\r\n  }\r\n\r\n  /**\r\n   * Obtener headers comunes para las peticiones\r\n   */\r\n  getHeaders() {\r\n    const headers = {\r\n      'Content-Type': 'application/json',\r\n    };\r\n\r\n    // Agregar token de autenticación si existe\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      headers['Authorization'] = `Bearer ${token}`;\r\n    }\r\n\r\n    return headers;\r\n  }\r\n\r\n  /**\r\n   * Manejar respuesta de la API\r\n   */\r\n  async handleResponse(response) {\r\n    if (!response.ok) {\r\n      let errorMessage = 'Error en la petición';\r\n      \r\n      try {\r\n        const errorData = await response.json();\r\n        errorMessage = errorData.message || errorData.error || errorMessage;\r\n      } catch {\r\n        errorMessage = `Error ${response.status}: ${response.statusText}`;\r\n      }\r\n\r\n      throw new Error(errorMessage);\r\n    }\r\n\r\n    // Si la respuesta está vacía, retornar null\r\n    const contentType = response.headers.get('content-type');\r\n    if (!contentType || !contentType.includes('application/json')) {\r\n      return null;\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n\r\n  /**\r\n   * Realizar petición GET\r\n   */\r\n  async get(endpoint) {\r\n    try {\r\n      const response = await fetch(`${this.baseURL}${endpoint}`, {\r\n        method: 'GET',\r\n        headers: this.getHeaders(),\r\n      });\r\n\r\n      return await this.handleResponse(response);\r\n    } catch (error) {\r\n      console.error(`Error en GET ${endpoint}:`, error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Realizar petición POST\r\n   */\r\n  async post(endpoint, data = {}) {\r\n    try {\r\n      const response = await fetch(`${this.baseURL}${endpoint}`, {\r\n        method: 'POST',\r\n        headers: this.getHeaders(),\r\n        body: JSON.stringify(data),\r\n      });\r\n\r\n      return await this.handleResponse(response);\r\n    } catch (error) {\r\n      console.error(`Error en POST ${endpoint}:`, error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Realizar petición PUT\r\n   */\r\n  async put(endpoint, data = {}) {\r\n    try {\r\n      const response = await fetch(`${this.baseURL}${endpoint}`, {\r\n        method: 'PUT',\r\n        headers: this.getHeaders(),\r\n        body: JSON.stringify(data),\r\n      });\r\n\r\n      return await this.handleResponse(response);\r\n    } catch (error) {\r\n      console.error(`Error en PUT ${endpoint}:`, error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Realizar petición DELETE\r\n   */\r\n  async delete(endpoint) {\r\n    try {\r\n      const response = await fetch(`${this.baseURL}${endpoint}`, {\r\n        method: 'DELETE',\r\n        headers: this.getHeaders(),\r\n      });\r\n\r\n      return await this.handleResponse(response);\r\n    } catch (error) {\r\n      console.error(`Error en DELETE ${endpoint}:`, error);\r\n      throw error;\r\n    }\r\n  }\r\n}\r\n\r\n// Instancia singleton\r\nexport const apiClient = new ApiClient();\r\nexport default apiClient;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
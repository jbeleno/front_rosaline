{"ast":null,"code":"var _s = $RefreshSig$();\n/**\r\n * Hook personalizado para autenticación\r\n * Proporciona acceso al store de autenticación y métodos útiles\r\n */\nimport { useEffect } from 'react';\nimport useAuthStore from '../store/authStore';\nimport { supabase } from '../../../config/supabase';\nexport function useAuth() {\n  _s();\n  const {\n    user,\n    userProfile,\n    cliente,\n    loading,\n    error,\n    isAuthenticated,\n    isAdmin,\n    initializeAuth,\n    login,\n    register,\n    logout,\n    fetchUserProfile\n  } = useAuthStore();\n\n  // Inicializar autenticación al montar el componente\n  useEffect(() => {\n    initializeAuth();\n\n    // Escuchar cambios en el estado de autenticación de Supabase\n    const {\n      data: {\n        subscription\n      }\n    } = supabase.auth.onAuthStateChange(async (event, session) => {\n      if (event === 'SIGNED_IN' || event === 'TOKEN_REFRESHED') {\n        await initializeAuth();\n        if (session !== null && session !== void 0 && session.user) {\n          await fetchUserProfile(session.user.id);\n        }\n      } else if (event === 'SIGNED_OUT') {\n        useAuthStore.getState().logout();\n      }\n    });\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, []);\n  return {\n    user,\n    userProfile,\n    cliente,\n    loading,\n    error,\n    isAuthenticated,\n    isAdmin,\n    login,\n    register,\n    logout\n  };\n}\n_s(useAuth, \"rP8piQq8id568hKcJXrH14RAWfE=\", false, function () {\n  return [useAuthStore];\n});","map":{"version":3,"names":["useEffect","useAuthStore","supabase","useAuth","_s","user","userProfile","cliente","loading","error","isAuthenticated","isAdmin","initializeAuth","login","register","logout","fetchUserProfile","data","subscription","auth","onAuthStateChange","event","session","id","getState","unsubscribe"],"sources":["C:/Users/jesus/Desktop/mantenimiento/front_rosaline/front_gestion/src/features/auth/hooks/useAuth.js"],"sourcesContent":["/**\r\n * Hook personalizado para autenticación\r\n * Proporciona acceso al store de autenticación y métodos útiles\r\n */\r\nimport { useEffect } from 'react';\r\nimport useAuthStore from '../store/authStore';\r\nimport { supabase } from '../../../config/supabase';\r\n\r\nexport function useAuth() {\r\n  const {\r\n    user,\r\n    userProfile,\r\n    cliente,\r\n    loading,\r\n    error,\r\n    isAuthenticated,\r\n    isAdmin,\r\n    initializeAuth,\r\n    login,\r\n    register,\r\n    logout,\r\n    fetchUserProfile,\r\n  } = useAuthStore();\r\n\r\n  // Inicializar autenticación al montar el componente\r\n  useEffect(() => {\r\n    initializeAuth();\r\n\r\n    // Escuchar cambios en el estado de autenticación de Supabase\r\n    const { data: { subscription } } = supabase.auth.onAuthStateChange(\r\n      async (event, session) => {\r\n        if (event === 'SIGNED_IN' || event === 'TOKEN_REFRESHED') {\r\n          await initializeAuth();\r\n          if (session?.user) {\r\n            await fetchUserProfile(session.user.id);\r\n          }\r\n        } else if (event === 'SIGNED_OUT') {\r\n          useAuthStore.getState().logout();\r\n        }\r\n      }\r\n    );\r\n\r\n    return () => {\r\n      subscription.unsubscribe();\r\n    };\r\n  }, []);\r\n\r\n  return {\r\n    user,\r\n    userProfile,\r\n    cliente,\r\n    loading,\r\n    error,\r\n    isAuthenticated,\r\n    isAdmin,\r\n    login,\r\n    register,\r\n    logout,\r\n  };\r\n}\r\n\r\n"],"mappings":";AAAA;AACA;AACA;AACA;AACA,SAASA,SAAS,QAAQ,OAAO;AACjC,OAAOC,YAAY,MAAM,oBAAoB;AAC7C,SAASC,QAAQ,QAAQ,0BAA0B;AAEnD,OAAO,SAASC,OAAOA,CAAA,EAAG;EAAAC,EAAA;EACxB,MAAM;IACJC,IAAI;IACJC,WAAW;IACXC,OAAO;IACPC,OAAO;IACPC,KAAK;IACLC,eAAe;IACfC,OAAO;IACPC,cAAc;IACdC,KAAK;IACLC,QAAQ;IACRC,MAAM;IACNC;EACF,CAAC,GAAGf,YAAY,CAAC,CAAC;;EAElB;EACAD,SAAS,CAAC,MAAM;IACdY,cAAc,CAAC,CAAC;;IAEhB;IACA,MAAM;MAAEK,IAAI,EAAE;QAAEC;MAAa;IAAE,CAAC,GAAGhB,QAAQ,CAACiB,IAAI,CAACC,iBAAiB,CAChE,OAAOC,KAAK,EAAEC,OAAO,KAAK;MACxB,IAAID,KAAK,KAAK,WAAW,IAAIA,KAAK,KAAK,iBAAiB,EAAE;QACxD,MAAMT,cAAc,CAAC,CAAC;QACtB,IAAIU,OAAO,aAAPA,OAAO,eAAPA,OAAO,CAAEjB,IAAI,EAAE;UACjB,MAAMW,gBAAgB,CAACM,OAAO,CAACjB,IAAI,CAACkB,EAAE,CAAC;QACzC;MACF,CAAC,MAAM,IAAIF,KAAK,KAAK,YAAY,EAAE;QACjCpB,YAAY,CAACuB,QAAQ,CAAC,CAAC,CAACT,MAAM,CAAC,CAAC;MAClC;IACF,CACF,CAAC;IAED,OAAO,MAAM;MACXG,YAAY,CAACO,WAAW,CAAC,CAAC;IAC5B,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO;IACLpB,IAAI;IACJC,WAAW;IACXC,OAAO;IACPC,OAAO;IACPC,KAAK;IACLC,eAAe;IACfC,OAAO;IACPE,KAAK;IACLC,QAAQ;IACRC;EACF,CAAC;AACH;AAACX,EAAA,CAnDeD,OAAO;EAAA,QAcjBF,YAAY;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}